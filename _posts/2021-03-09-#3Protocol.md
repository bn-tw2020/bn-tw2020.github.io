---
layout: post
title: "프로토콜과 네트워크 코어"
categories: 네트워크
author: bn-tw2020
---
* content
{:toc}


## Intro

```
컴퓨터네트워크의 기본을 정리하는 글이다.
```





---

## 프로토콜

HTTP, FTP, SMTP 여기에 P는 다 프로토콜이다.  

```
프로토콜은 영어로 규약이다.
서로 다른 개체가 의사소통하기 위해선 룰이 존재하는 것이다.
한국인과 한국인은 한국어로 소통을 할 것이며, 한 친구가 말하면 다른 사람은 들어줄 거며,
의사소통을 하기 위한 정해진 규칙이라고 생각하면 될 것이다.

서로 친구가 전화통화를 하기 위해서
A: 여보세요?
B: 여보세요? 라고 할 것이다.
중요한 이야기는 아니지만, 일종의 메시지를 전달하기 위한 규칙이다.

우리 모두가 의사소통하기 위한 프로토콜이 존재합니다.
인터넷에서는 더 확실한 프로토콜이 필요할 것이며,
프로토콜이 틀리면 의사소통이 안되게 될 것이다.
```

## 네트워크 코어

네트워크 코어는 특수한 컴퓨터라고 생각하면 된다.  
라우터라는 장비들이 존재해서 사용자가 보내는 메시지들을 목적지까지 전달해준다.

```
그럼 어떤식으로 전달을 하지?
  1. circuit switching
  2. packet switching

circuit switching
  출발 지점부터 도착 지점까지 bandwidth를 예약해서 메시지를 보냅니다.
  예) 대통령이 어딜 간다고하면, 그 길을 다 뚫어서 통제를 할 것이다.

packet switching
  인터넷에서 사용하는 방법이다.
  우리가 보내고자하는 메시지가 패킷으로 잘게 쪼개져서
  우리가 보내고자하는 패킷과 다른 사람이 보내고자하는 패킷이 고르게 보내진다.

why) 인터넷은 왜 패킷 스위칭을 사용할까?
    네이버 기사를 본다고 생각해보자.
    한 번 클릭 하고나서 한참동안 정보를 보고 있을 것이다.
    circuit switching 처럼 예약해노면 손해입니다.
    그럼 다른 사람들과 같이 보내면 더 이득이 아닐까?

패킷 스위칭의 단점은 사용자가 동시에 몇명이상 몰릴경우에 문제가 생길 수도 있다.
접속했는데 페이지가 늦게 로딩된다는 것을 겪여 봤을 것이다.
```

### 패킷 스위칭을 사용하면?

```
packet switching이라는 사용하면서 생기는 일들

우리가 패킷이라는 단위로 보내면 크게 중간에 라우터를 통해서 전달이 된다.
사용자가 라우터에 보낼 수 있는 대역폭 크기보다 더 빠른 속도로 데이터를 보내게 되면, 막힐 수 밖에 없다.
지연이 발생할 것이다.
```


<img width="624" alt="스크린샷 2021-03-09 오후 5 40 42" src="https://user-images.githubusercontent.com/66770613/110442827-94b6f980-80fe-11eb-85c8-be5e760f7ffc.png">  

```
1. 패킷을 받았을 때 라우터가 하는 일은 패킷에 따라 알맞은 곳으로 보내줘야 한다.
   그것이 바로 프로세스 딜레이이다. 무조건적으로 발생한다.

2. 만약 알맞은 방향으로 보내려고 하는데 다른 친구들이 기다리고 있는 경우가 있다.
   그러면 대기를 해야 할것이다. 앞에 친구들이 빠질 때까지 이 것을 queueing delay이라고 한다.

3. queue에서 빠져나와서 이제 내 차례가 된다면, 패킷을 보내게 된다.
   패킷 하나가 온전히 마지막 비트까지 나가는 시간을 transmission delay라고 한다.

4. 마지막 비트가 다음 라우터에 도달하는 시간을 propagation delay라고 한다.
```


### 지연을 줄이는 해결 방안

```
1. 프로세스 딜레이를 줄이려면 좋은 라우터를 사용하자.
   고속도로 톨게이트를 보자. 여기서 기다리는 시간이 아마 프로세스 딜레이일 것이다.
   또한, 예전엔 사람들이 직접 계산을 해서 시간이 오래걸렸지만, 현재는 하이패스를 통해 빠르게 지나 갈 수 있다.

2. transmission delay를 줄이려면? 대역폭을 늘리면 되지 않을까?
   고속도로에서 차선을 늘려주면 더 팍팍 지나갈 수 있으니깐

3. queueing delay는 사용자가 보내주는 패턴에 따라 다르기 때문에 지연을 줄일 수가...
4. propagation delay는 빛의 속도이기 때문에 ...가늠이 안된다.
```

### 손실

```
만약 큐에도 패킷이 다 찾는데 계속 패킷이 들어온다면?
다 막혔기 때문에 패킷 버리기 때문에 손실이 발생한다.

TCP 전송은 신뢰성 있는 정보 전달 제공인데 실제로 네트워크에서 유실이 발생한다??
다시 재전송을 한다.
그럼 재전송은 누가? 재전송은 네트워크 엣지에서 다시 전송을 하게 된다.

쉽게 설명하면, 편지봉투를 유실했는데 우체국에서 다시 보내주지 않고 보낸사람이 다시 보낸다.라고 이해하면 된다.
```