---
layout: post
title: "캡슐화로 보는 보안"
categories: Java
author: bn-tw2020
---
* content
{:toc}

## Intro

```
캡슐화는 데이터와 데이터를 처리하는 함수를 하나로 묶는 것을 의미한다.
```




---

## 캡슐화

* 캡슐화는 정보 은닉이 필요한 중요한 데이터와 기능을 불충분하게 캡슐화하거나 잘못
  사용함으로써 발생할 수 있는 문제를 예방하기 위한 보안 점검 항목들이다.

```
1. 캡슐화로 인해 발생할 수 있는 보안 약점에는 잘못된 세션에 의한 정보 노출,
   제거되지 않고 남은 디버그 코드, 시스템 데이터 정보 노출 등이 있다.

2. 가루약은 삼키면 맛없는데, 캡슐약은 맛이 안느껴진다.
   즉, 안의 내용물을 숨기면서 무슨 맛인지 모르게끔 할 수 있는 것이다.
```


## 잘못된 세션에 의한 정보 노출

* 다중 스레드환경에서 멤버 변수에 정보를 저장할 때 발생하는 보안 약점

* 싱글톤 패턴에서 발생하는 레이스컨디션으로 인해 동기화 오류가 발생하거나,
  멤버 변수의 정보가 노출될 수 있다.

```
레이스컨디션 : 하나의 프로그램에서 두 개 이상의 프로세스가 공용 자원을 사용하기 위해 동시에 경쟁하며 접근하는 상황 
```


## 제거되지 않고 남은 디버그 코드

* 제거되지 않고 남은 디버그 코드는 개발 중에 버그 수정이나 
  결과값 확인을 위해 남겨둔 코드드로 인해 발생하는 보안 약점

* SW 제어에 사용되는 중요한 정보가 디버그 코드로 인해 노출 가능성이 생긴다.

* 디버그 코드에 인증 및 식별 절차를 생략하거나 우회하는 코드가 포함되면 공격자가 악용할 수 있다.

* 배포 전 코드 검사를 통해 남아있는 디버그 코드를 삭제하면서 방지


## 시스템 데이터 정보 노출

* 시스템의 내부 정보를 시스템 메시지 등을 통해 외부로 출력하도록 코딩할때 발생하는 보안 약점

* 시스템 메시지를 통해 노출되는 메시지는 최소한의 정보만을 제공하면서 방지


## Public 메소드로부터 반환된 Private 배열

* 클래스 내에서만 사용 가능한 `private` 배열을
  모든 클래스에서 접근이 가능한 `public` 메소드에서 반환할 때 발생하는 약점

* public 메소드가 private 배열을 반환하면 배열의 주소가
  외부로 공개되어 외부에서 접근이 가능한 문제 발생

* private 배열을 별도의 메소드를 통해 조작하거나,
  동일한 형태의 복제본으로 반환받은 후 값을 전달하는 방식으로 방지


### 접근 지정자

* 접근 지정자는 PL에서 특정 개체를 선언할 때 외부로부터의 접근을 제한하기 위해 사용되는 예약어

<center>

| 한정자 | 클래스 내부 | 패키지 내부 | 하위 클래스 | 패키지 외부 |
|:--------|:--------:|--------:|--------:|--------:|
| public | O | O | O | X |
| protected | O | O | O | X |
| default | O | O | X | X |
| private | O | X | X | X |

</center>

## Private 배열에 Public 데이터 할당

* `private` 배열에 `public` 으로 선언된 데이터 또는 메소드의 파라미터를 저장할 때
  발생하는 보안 약점

* private 배열에 public 데이터를 저장하면 private 배열을 외부에서 접근할 수 있게 된다.

* public으로 선언된 데이터를 private 배열에 저장할 때,
  레퍼런스가 아닌 값을 직접 저장한다.

```
레퍼런스 :  메모리의 위치를 공유한다는 의미이다.
example) 배열 A를 선언하여 값을 저장하고 배열 B 선언 시 B = A라고 했을 때,
         배열 B는 배열 A와 동일한 메모리를 공유하게 된다.
         배열 B에는 어떠한 값도 저장하지 않았지만 배열 A에 저장한 값들을 B를 통해 접근할 수 있다.
```
